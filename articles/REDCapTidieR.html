<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started with REDCapTidieR • REDCapTidieR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with REDCapTidieR">
<meta property="og:description" content="Start here for an introduction on how to use REDCapTidieR in your data analysis.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">REDCapTidieR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/REDCapTidieR.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/diving_deeper.html">Diving Deeper: Understanding REDCapTidieR Data Tibbles</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/CHOP-CGTInformatics/REDCapTidieR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting Started with REDCapTidieR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CHOP-CGTInformatics/REDCapTidieR/blob/HEAD/vignettes/REDCapTidieR.Rmd" class="external-link"><code>vignettes/REDCapTidieR.Rmd</code></a></small>
      <div class="hidden name"><code>REDCapTidieR.Rmd</code></div>

    </div>

    
    
<p><a href="https://www.project-redcap.org/" class="external-link">REDCap</a> is a powerful
database solution used by many institutions around the world. The <a href="https://ouhscbbmc.github.io/REDCapR/" class="external-link">REDCapR</a> package
streamlines calls to the REDCap API. One of its main uses is to import
records from a REDCap project. This works well for simple projects,
however becomes ugly when complex databases that include longitudinal
structure and/or repeated instruments are involved.</p>
<p>The REDCapTidieR package aims to make the life of analysts who deal
with complex REDCap databases easier. It builds upon
<strong>REDCapR</strong> to make its output <strong>tidier</strong>.
Instead of one large data frame that contains all data from all
instruments, the analyst gets to work with a set of tidy tibbles, one
for each REDCap instrument.</p>
<div class="section level2">
<h2 id="case-study-the-superhero-database">Case Study: The Superhero Database<a class="anchor" aria-label="anchor" href="#case-study-the-superhero-database"></a>
</h2>
<p>Let’s look at a REDCap database that has information about some 734
superheroes, derived from the <a href="https://www.superherodb.com/" class="external-link">Superhero Database</a>.</p>
<p>Here is a screenshot of the REDCap Status Dashboard of this database.
Note that there are two instruments, <strong>Heroes Information</strong>
which captures data about each individual superhero, and <strong>Super
Hero Powers</strong> which captures each one of the superpowers that a
specific superhero possesses.</p>
<center>
<div class="figure">
<img src="record_status_dash.png" alt=""><p class="caption">REDCap Record Status Dashboard for the Superhero
database</p>
</div>
</center>
</div>
<div class="section level2">
<h2 id="importing-data-from-redcap">Importing data from REDCap<a class="anchor" aria-label="anchor" href="#importing-data-from-redcap"></a>
</h2>
<p>The <code>read_redcap_tidy</code> function is the workhorse of
REDCapTidieR. It requires a REDCap database URI and a REDCap API token.
<em>Note that you need to have API access to the REDCap database to use
REDCapTidieR. You cannot use REDCapTidieR with files exported from
REDCap.</em></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/CHOP-CGTInformatics/REDCapTidieR" class="external-link">REDCapTidieR</a></span><span class="op">)</span></span>
<span><span class="va">superheroes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_redcap_tidy.html">read_redcap_tidy</a></span><span class="op">(</span><span class="va">redcap_uri</span>, <span class="va">token</span><span class="op">)</span></span>
<span></span>
<span><span class="va">superheroes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 2</span></span>
<span><span class="co">#&gt; Columns: 9</span></span>
<span><span class="co">#&gt; $ redcap_form_name  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "heroes_information", "super_hero_powers"</span></span>
<span><span class="co">#&gt; $ redcap_form_label <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Heroes Information", "Super Hero Powers"</span></span>
<span><span class="co">#&gt; $ redcap_data       <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> [&lt;tbl_df[734 x 12]&gt;], [&lt;tbl_df[5966 x 4]&gt;]</span></span>
<span><span class="co">#&gt; $ redcap_metadata   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> [&lt;tbl_df[11 x 16]&gt;], [&lt;tbl_df[2 x 16]&gt;]</span></span>
<span><span class="co">#&gt; $ structure         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "nonrepeating", "repeating"</span></span>
<span><span class="co">#&gt; $ data_rows         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 734, 5966</span></span>
<span><span class="co">#&gt; $ data_cols         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 12, 4</span></span>
<span><span class="co">#&gt; $ data_size         <span style="color: #949494; font-style: italic;">&lt;lbstr_by&gt;</span> 123.24 kB, 180.21 kB</span></span>
<span><span class="co">#&gt; $ data_na_pct       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.2316076, 0.0000000</span></span></code></pre></div>
<p>This returns a tibble with two rows. You might expect more rows from
a database with 734 superheroes. <code>read_redcap_tidy</code> returns
data in a special object, the <strong>supertibble</strong>, which
contains a set of tidy tibbles, one for each REDCap instrument’s
data.</p>
<p>Each row of the supertibble corresponds to one REDCap instrument. The
<code>redcap_form_name</code> and <code>redcap_form_label</code> columns
identify that instrument. The <code>redcap_data</code> column contains a
tidy tibble with its data. Similarly, the <code>redcap_metadata</code>
column contains a tidy tibble with the REDCap metadata from that
instrument. Additional columns contain useful information about the
<code>redcap_data</code> tibble, such as the number of rows and columns,
the size in memory, and the percentage of missing values.</p>
</div>
<div class="section level2">
<h2 id="exploring-the-contents-of-the-supertibble">Exploring the contents of the supertibble<a class="anchor" aria-label="anchor" href="#exploring-the-contents-of-the-supertibble"></a>
</h2>
<p>The supertibble is designed to be explored using the RStudio Data
Viewer. Clicking on the table icon in the Environment tab opens a view
of the supertibble. At a glance you see an overview of the instruments
in the REDCap project.</p>
<center>
<div class="figure">
<img src="viewer-supertibble.gif" style="width:75.0%" alt=""><p class="caption">Data Viewer showing the <code>superheroes</code>
supertibble</p>
</div>
</center>
<p>You can drill down into the individual data tables in the
<code>redcap_data</code> and <code>redcap_metadata</code> columns. Note
that in the <code>heroes_information</code> each row represents a
superhero, identified by their <code>record_id</code>.</p>
<center>
<div class="figure">
<img src="viewer-heroes-information.gif" style="width:75.0%" alt=""><p class="caption">Data Viewer showing the
<code>heroes_information</code> tibble</p>
</div>
</center>
<p>In the <code>super_hero_powers</code> data tibble, each row
represents a superpower of a specific hero. Each row is identified by
the combination of <code>record_id</code> and
<code>redcap_repeat_instance</code>. This difference in granularity is
because <code>super_hero_powers</code> is a <strong>repeating</strong>
instrument whereas <code>heroes_information</code> is a
<strong>nonrepeating</strong> instrument.</p>
<center>
<div class="figure">
<img src="viewer-super-hero-powers.gif" style="width:75.0%" alt=""><p class="caption">Data Viewer showing the
<code>super_hero_powers</code> tibble</p>
</div>
</center>
<p>You can also explore the tibbles in the <code>redcap_metadata</code>
column to find out about field labels, field types, and other field
attributes.</p>
<center>
<div class="figure">
<img src="viewer-metadata.gif" style="width:100.0%" alt=""><p class="caption">Data Viewer showing a the metadata tibble of
<code>heroes_information</code></p>
</div>
</center>
</div>
<div class="section level2">
<h2 id="extracting-tibbles-from-the-supertibble">Extracting tibbles from the supertibble<a class="anchor" aria-label="anchor" href="#extracting-tibbles-from-the-supertibble"></a>
</h2>
<p>REDCapTidieR provides three different functions to extract tibbles
with data from individual instruments from a supertibble.</p>
<div class="section level3">
<h3 id="binding-tibbles-into-the-environment">Binding tibbles into the environment<a class="anchor" aria-label="anchor" href="#binding-tibbles-into-the-environment"></a>
</h3>
<p>The <code>bind_tables</code> function takes a supertibble and binds
individual instruments directly into the environment. Note how the
<code>super_hero_powers</code> and <code>heroes_information</code>
tibbles appear in the Environment pane.</p>
<center>
<p><img src="bind-tables.gif" style="width:75.0%"></p>
</center>
<p>By default, <code>bind_tables</code> extracts all data tibbles from
the supertibble. With the <code>tbls</code> argument you can specify a
subset of tibbles that should be extracted. You can also supply your own
environment object to which the tibbles will be added using the
<code>environment</code> argument.</p>
</div>
<div class="section level3">
<h3 id="extracting-a-list-of-tibbles">Extracting a list of tibbles<a class="anchor" aria-label="anchor" href="#extracting-a-list-of-tibbles"></a>
</h3>
<p>The <code>extract_tables</code> function takes a supertibble and
returns a list of tibbles. The default is to extract all tibbles.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">superheroes_list</span> <span class="op">&lt;-</span> <span class="va">superheroes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/extract_tables.html">extract_tables</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">superheroes_list</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span>max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 2</span></span>
<span><span class="co">#&gt;  $ heroes_information: tibble [734 × 12] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ super_hero_powers : tibble [5,966 × 4] (S3: tbl_df/tbl/data.frame)</span></span></code></pre></div>
<p>You can use tidyselect semantics to select specific tibbles.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">superheroes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/extract_tables.html">extract_tables</a></span><span class="op">(</span><span class="fu">ends_with</span><span class="op">(</span><span class="st">"powers"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span>max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ super_hero_powers: tibble [5,966 × 4] (S3: tbl_df/tbl/data.frame)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="extracting-a-single-tibble">Extracting a single tibble<a class="anchor" aria-label="anchor" href="#extracting-a-single-tibble"></a>
</h3>
<p>The <code><a href="../reference/extract_table.html">extract_table()</a></code> takes a supertibble and returns a
single tibble.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">superheroes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/extract_table.html">extract_table</a></span><span class="op">(</span><span class="st">"heroes_information"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 734 × 12</span></span></span>
<span><span class="co">#&gt;    record_id name     gender eye_c…¹ race  hair_…² height weight publi…³ skin_…⁴</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         0 A-Bomb   Male   yellow  Human No Hair    203    441 Marvel… -      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         1 Abe Sap… Male   blue    Icth… No Hair    191     65 Dark H… blue   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         2 Abin Sur Male   blue    Unga… No Hair    185     90 DC Com… red    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         3 Abomina… Male   green   Huma… No Hair    203    441 Marvel… -      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         4 Abraxas  Male   blue    Cosm… Black      -<span style="color: #BB0000;">99</span>    -<span style="color: #BB0000;">99</span> Marvel… -      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         5 Absorbi… Male   blue    Human No Hair    193    122 Marvel… -      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         6 Adam Mo… Male   blue    -     Blond      -<span style="color: #BB0000;">99</span>    -<span style="color: #BB0000;">99</span> NBC - … -      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         7 Adam St… Male   blue    Human Blond      185     88 DC Com… -      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         8 Agent 13 Female blue    -     Blond      173     61 Marvel… -      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>         9 Agent B… Male   brown   Human Brown      178     81 Marvel… -      </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 724 more rows, 2 more variables: alignment &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   form_status_complete &lt;fct&gt;, and abbreviated variable names ¹​eye_color,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​hair_color, ³​publisher, ⁴​skin_color</span></span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="adding-variable-labels-with-the-labelled-package">Adding variable labels with the labelled package<a class="anchor" aria-label="anchor" href="#adding-variable-labels-with-the-labelled-package"></a>
</h2>
<p><code>REDCapTidieR</code> integrates with the <a href="http://larmarange.github.io/labelled/" class="external-link">labelled</a> package to
allow you to attach labels to variables in the supertibble. Variable
labels can make data exploration easier. An increasing number of R
packages support labelled data, including <a href="https://ggplot2.tidyverse.org/" class="external-link">ggplot</a> (via <a href="https://jonocarroll.github.io/ggeasy/" class="external-link">ggeasy</a>) and <a href="https://www.danieldsjoberg.com/gtsummary/" class="external-link">gtsummary</a>. The
RStudio Data Viewer shows variable labels below variable names.</p>
<center>
<p><img src="labelled-supertibble.png" style="width:75.0%"></p>
</center>
<p>The <code><a href="../reference/make_labelled.html">make_labelled()</a></code> function takes a supertibble and
returns a supertibble with variable labels applied to the variables of
the supertibble as well as to the variables of all the tibbles in
<code>redcap_data</code> and <code>redcap_metadata</code>.</p>
<p>The <code><a href="http://larmarange.github.io/labelled/reference/look_for.html" class="external-link">labelled::look_for</a></code> function can be used to explore
the variable labels of a tibble.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">superheroes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/make_labelled.html">make_labelled</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/bind_tables.html">bind_tables</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">labelled</span><span class="fu">::</span><span class="fu"><a href="http://larmarange.github.io/labelled/reference/look_for.html" class="external-link">look_for</a></span><span class="op">(</span><span class="va">heroes_information</span><span class="op">)</span></span>
<span><span class="co">#&gt;  pos variable             label              col_type values    </span></span>
<span><span class="co">#&gt;  1   record_id            Record ID          dbl                </span></span>
<span><span class="co">#&gt;  2   name                 Hero name:         chr                </span></span>
<span><span class="co">#&gt;  3   gender               Gender             chr                </span></span>
<span><span class="co">#&gt;  4   eye_color            Eye color          chr                </span></span>
<span><span class="co">#&gt;  5   race                 Race               chr                </span></span>
<span><span class="co">#&gt;  6   hair_color           Hair color         chr                </span></span>
<span><span class="co">#&gt;  7   height               Height             dbl                </span></span>
<span><span class="co">#&gt;  8   weight               Weight             dbl                </span></span>
<span><span class="co">#&gt;  9   publisher            Publisher          chr                </span></span>
<span><span class="co">#&gt;  10  skin_color           Skin Color         chr                </span></span>
<span><span class="co">#&gt;  11  alignment            Alignment          chr                </span></span>
<span><span class="co">#&gt;  12  form_status_complete REDCap Form Status fct      Incomplete</span></span>
<span><span class="co">#&gt;                                                       Unverified</span></span>
<span><span class="co">#&gt;                                                       Complete</span></span></code></pre></div>
<p>Where did these labels come from? These labels are actually the
REDCap field labels that prompt data entry in the REDCap instrument!
REDCapTidieR places them into the <code>field_label</code> variable of
the <code>redcap_metadata</code> tibble corresponding to the
instrument.</p>
<center>
<p><img src="heroes-information-redcap-form.png" style="width:75.0%"></p>
</center>
<p>The label for <code>name</code> doesn’t look quite right. Let’s
remove that trailing <code>:</code>. The <code>make_labelled</code>
function has a <code>format_labels</code> argument that you can use to
preprocess labels before applying them to the variables.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">superheroes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/make_labelled.html">make_labelled</a></span><span class="op">(</span>format_labels <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">":"</span>, <span class="st">""</span>, <span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/bind_tables.html">bind_tables</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">labelled</span><span class="fu">::</span><span class="fu"><a href="http://larmarange.github.io/labelled/reference/look_for.html" class="external-link">look_for</a></span><span class="op">(</span><span class="va">heroes_information</span>, <span class="st">"hero"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  pos variable label     col_type values</span></span>
<span><span class="co">#&gt;  2   name     Hero name chr</span></span></code></pre></div>
<p>Removing trailing <code>:</code> characters is a fairly common
operation, so REDCapTidieR provides a helper function that can be passed
to the <code>format_labels</code> argument:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/format-helpers.html">fmt_strip_trailing_colon</a></span><span class="op">(</span><span class="st">"Hero name:"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Hero name"</span></span></code></pre></div>
<p>See the other available helpers with
<code><a href="../reference/format-helpers.html">?`format-helpers`</a></code>.</p>
<p>The <code>format_labels</code> argument will also accept a multiple
functions in a vector or list. Any function that takes a character
vector and returns a modified character vector can be used.
<code>make_labelled</code> will process the variable labels using these
functions in the order they are supplied. In the following example, we
remove the trailing colon and make the labels lower case.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">superheroes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/make_labelled.html">make_labelled</a></span><span class="op">(</span></span>
<span>    format_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="va">fmt_strip_trailing_colon</span>, </span>
<span>      <span class="fu">base</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/bind_tables.html">bind_tables</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">labelled</span><span class="fu">::</span><span class="fu"><a href="http://larmarange.github.io/labelled/reference/look_for.html" class="external-link">look_for</a></span><span class="op">(</span><span class="va">heroes_information</span><span class="op">)</span></span>
<span><span class="co">#&gt;  pos variable             label              col_type values    </span></span>
<span><span class="co">#&gt;  1   record_id            record id          dbl                </span></span>
<span><span class="co">#&gt;  2   name                 hero name          chr                </span></span>
<span><span class="co">#&gt;  3   gender               gender             chr                </span></span>
<span><span class="co">#&gt;  4   eye_color            eye color          chr                </span></span>
<span><span class="co">#&gt;  5   race                 race               chr                </span></span>
<span><span class="co">#&gt;  6   hair_color           hair color         chr                </span></span>
<span><span class="co">#&gt;  7   height               height             dbl                </span></span>
<span><span class="co">#&gt;  8   weight               weight             dbl                </span></span>
<span><span class="co">#&gt;  9   publisher            publisher          chr                </span></span>
<span><span class="co">#&gt;  10  skin_color           skin color         chr                </span></span>
<span><span class="co">#&gt;  11  alignment            alignment          chr                </span></span>
<span><span class="co">#&gt;  12  form_status_complete redcap form status fct      Incomplete</span></span>
<span><span class="co">#&gt;                                                       Unverified</span></span>
<span><span class="co">#&gt;                                                       Complete</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Richard Hanna, Stephan Kadauke, Ezra Porter.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
