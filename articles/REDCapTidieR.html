<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>REDCapTidieR • REDCapTidieR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="REDCapTidieR">
<meta property="og:description" content="Start here for an introduction on how to use REDCapTidieR in your workflows.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">REDCapTidieR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/REDCapTidieR.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/longitudinal_redcap.html">Working with Longitudinal REDCap Databases</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/CHOP-CGTDataOps/REDCapTidieR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>REDCapTidieR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CHOP-CGTDataOps/REDCapTidieR/blob/HEAD/vignettes/REDCapTidieR.Rmd" class="external-link"><code>vignettes/REDCapTidieR.Rmd</code></a></small>
      <div class="hidden name"><code>REDCapTidieR.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of <code>REDCapTidieR</code> like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"CHOP-CGTDataOps/REDCapTidieR"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="introduction-to-redcap-and-redcapr">Introduction to REDCap and <code>REDCapR</code><a class="anchor" aria-label="anchor" href="#introduction-to-redcap-and-redcapr"></a>
</h2>
<p><a href="https://www.project-redcap.org/" class="external-link">REDCap</a> is a powerful database solution used by many research institutions:</p>
<blockquote>
<p>“REDCap is a secure web application for building and managing online surveys and databases. While REDCap can be used to collect virtually any type of data in any environment (including compliance with 21 CFR Part 11, FISMA, HIPAA, and GDPR), it is specifically geared to support online and offline data capture for research studies and operations.”</p>
</blockquote>
<p>The <a href="https://ouhscbbmc.github.io/REDCapR/" class="external-link"><code>REDCapR</code></a> package streamlines calls to the REDCap API. Arguably, its main use is to download records from a REDCap project and present it to the analyst as a data frame. This works well for simple projects, however becomes ugly when complex databases that include longitudinal structure and/or repeated instruments are involved.</p>
<p>We wrote the <code>REDCapTidieR</code> package to mitigate these downsides and make the life of analysts who deal with complex REDCap databases easier. It does so by building upon <strong><code>REDCapR</code></strong> to make its output <strong>tidier</strong>. Instead of one large data frame, the analyst gets to work with a set of tidy tibbles, one for each REDCap instrument.</p>
<p>To demonstrate the use of <code>REDCapTidieR</code>, we are going to look at a REDCap database that has information about some 734 superheroes, derived from data scraped from the <a href="https://www.superherodb.com/" class="external-link">Superhero Database</a>.</p>
<p>This REDCap project contains two instruments:</p>
<ul>
<li><p><strong>Heroes Information</strong> contains demographic data (name, eye color, height and weight, etc.). This is a <em>nonrepeating</em> instrument.</p></li>
<li><p><strong>Super Hero Powers</strong> is a <em>repeating</em> instrument that captures all of the superpowers of a specific superhero. A superhero can have zero, one, or many superpowers associated with them.</p></li>
</ul>
<p>Here is a screenshot of the REDCap Status Dashboard of this database.</p>
<p><img src="record_status_dash.png"></p>
<p>Let’s take a look at the output of a call to <code><a href="https://ouhscbbmc.github.io/REDCapR/reference/redcap_read_oneshot.html" class="external-link">REDCapR::redcap_read_oneshot()</a></code> with this database (we turned it into a tibble for better readability):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">superheroes</span> <span class="op">&lt;-</span> <span class="fu">REDCapR</span><span class="fu">::</span><span class="fu"><a href="https://ouhscbbmc.github.io/REDCapR/reference/redcap_read_oneshot.html" class="external-link">redcap_read_oneshot</a></span><span class="op">(</span><span class="va">redcap_uri</span>, <span class="va">token</span><span class="op">)</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="co">#&gt; 6,700 records and 16 columns were read from REDCap in 1.0 seconds.  The http status code was 200.</span></span>
<span></span>
<span><span class="va">superheroes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">tibble</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6,700 × 16</span></span></span>
<span><span class="co">#&gt;    record_id redcap_r…¹ redca…² name  gender eye_c…³ race  hair_…⁴ height weight</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         0 <span style="color: #BB0000;">NA</span>              <span style="color: #BB0000;">NA</span> A-Bo… Male   yellow  Human No Hair    203    441</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         0 super_her…       1 <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         0 super_her…       2 <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         0 super_her…       3 <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         0 super_her…       4 <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         0 super_her…       5 <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         0 super_her…       6 <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         0 super_her…       7 <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         1 <span style="color: #BB0000;">NA</span>              <span style="color: #BB0000;">NA</span> Abe … Male   blue    Icth… No Hair    191     65</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>         1 super_her…       1 <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 6,690 more rows, 6 more variables: publisher &lt;chr&gt;, skin_color &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   alignment &lt;chr&gt;, heroes_information_complete &lt;dbl&gt;, power &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   super_hero_powers_complete &lt;dbl&gt;, and abbreviated variable names</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ¹​redcap_repeat_instrument, ²​redcap_repeat_instance, ³​eye_color, ⁴​hair_color</span></span></span></code></pre></div>
<p><code>redcap_read_oneshot()</code> returns a list with an element named <code>data</code> in which all the data from the project is provided as a single large data frame. While it may seem a good idea to have everything in one data frame, there are significant downsides, including:</p>
<ul>
<li><p>It’s unwieldy! Although there are only 734 superheroes in the data set, there are 6,700 rows. Every transformation first requires whittling down a huge data set. This increases cognitive load.</p></li>
<li><p>It’s sparse - there are a lot of <code>NA</code> values indicating missing values. Confusingly, these <code>NA</code> values don’t represent data fields left blank in the database but instead are an artifact of how the table is built.</p></li>
<li><p>Important metadata is missing. For example, it’s not trivial to determine which fields are associated with a specific instrument.</p></li>
<li><p>The meaning of a row in the data set is inconsistent. It depends on whether the row is associated with a specific instance of a specific repeated instrument or not, which you can figure out by looking at the <code>redcap_repeat_instrument</code>. This is confusing because we’d expect the granularity of a table to be consistent. It also techincally violates the definition of <a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html" class="external-link">Tidy Data</a> because multiple types of observational units are stored in the same table.</p></li>
</ul>
<div class="section level3">
<h3 id="tidying-redcap-exports">Tidying REDCap Exports<a class="anchor" aria-label="anchor" href="#tidying-redcap-exports"></a>
</h3>
<p>Now, let’s use the <code><a href="../reference/read_redcap_tidy.html">read_redcap_tidy()</a></code> function to query the same database and observe the output:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/CHOP-CGTDataOps/REDCapTidieR" class="external-link">REDCapTidieR</a></span><span class="op">)</span></span>
<span><span class="va">superheroes_tidy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_redcap_tidy.html">read_redcap_tidy</a></span><span class="op">(</span><span class="va">redcap_uri</span>, <span class="va">token</span><span class="op">)</span></span>
<span></span>
<span><span class="va">superheroes_tidy</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 3</span></span></span>
<span><span class="co">#&gt;   redcap_form_name   redcap_data          structure   </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> super_hero_powers  <span style="color: #949494;">&lt;tibble [5,966 × 4]&gt;</span> repeating   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> heroes_information <span style="color: #949494;">&lt;tibble [734 × 12]&gt;</span>  nonrepeating</span></span></code></pre></div>
<p>This returns a tibble with two rows. Each row represents a REDCap instrument. The first column contains the instrument name. The second column is a <strong>list column</strong> containing a tibble for each instrument. The third column indicates the repeat/nonrepeat structure of the instrument.</p>
</div>
<div class="section level3">
<h3 id="binding-redcaptidier-tibbles-into-the-environment">Binding <code>REDCapTidieR</code> tibbles into the Environment<a class="anchor" aria-label="anchor" href="#binding-redcaptidier-tibbles-into-the-environment"></a>
</h3>
<p>There’s a good chance that if we pull data from a REDCap database that we’d like that data to be represented as individual tibbles in the global environment. While it’s possible to do this manually, it becomes tedious if the REDCap project has many instruments. We provide the <code><a href="../reference/bind_tables.html">bind_tables()</a></code> function to automate this.</p>
<p><code><a href="../reference/bind_tables.html">bind_tables()</a></code> takes the output of <code><a href="../reference/read_redcap_tidy.html">read_redcap_tidy()</a></code>, extracts the individual tibbles and binds them to an environment. By default, this is the global environment. Let’s take a look at the objects in the global environment before and after calling <code><a href="../reference/bind_tables.html">bind_tables()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/ls_str.html" class="external-link">ls.str</a></span><span class="op">(</span>envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">globalenv</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">superheroes_tidy</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/bind_tables.html">bind_tables</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/ls_str.html" class="external-link">ls.str</a></span><span class="op">(</span>envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">globalenv</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; heroes_information : tibble [734 × 12] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt; NOT_CRAN :  logi TRUE</span></span>
<span><span class="co">#&gt; redcap_uri :  chr "https://redcap.chop.edu/api/"</span></span>
<span><span class="co">#&gt; super_hero_powers : tibble [5,966 × 4] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt; superheroes_tidy : tibble [2 × 3] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt; token :  chr "1ABEA57E6D77AAD6E144DF8A033875CD"</span></span></code></pre></div>
<p>Note that there are now two additional tibbles in the global environment.</p>
</div>
<div class="section level3">
<h3 id="structure-of-redcaptidier-tibbles">Structure of <code>REDCapTidieR</code> Tibbles<a class="anchor" aria-label="anchor" href="#structure-of-redcaptidier-tibbles"></a>
</h3>
<p>So what do REDCapTidieR tibbles look like? Consider <code>heroes_information</code>, which contains data from a <strong>nonrepeating</strong> instrument, and note the following:</p>
<ul>
<li><p>This is not a sparse table - most or all values are not <code>NA</code>.</p></li>
<li><p>The tibble’s name <code>heroes_information</code> is descriptive - it tells you what’s in the tibble.</p></li>
<li><p>Each row has the same observational unit - one <strong>superhero</strong>, identified by its <code>record_id</code>.</p></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">heroes_information</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 734 × 12</span></span></span>
<span><span class="co">#&gt;    record_id name     gender eye_c…¹ race  hair_…² height weight publi…³ skin_…⁴</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         0 A-Bomb   Male   yellow  Human No Hair    203    441 Marvel… -      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         1 Abe Sap… Male   blue    Icth… No Hair    191     65 Dark H… blue   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         2 Abin Sur Male   blue    Unga… No Hair    185     90 DC Com… red    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         3 Abomina… Male   green   Huma… No Hair    203    441 Marvel… -      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         4 Abraxas  Male   blue    Cosm… Black      -<span style="color: #BB0000;">99</span>    -<span style="color: #BB0000;">99</span> Marvel… -      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         5 Absorbi… Male   blue    Human No Hair    193    122 Marvel… -      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         6 Adam Mo… Male   blue    -     Blond      -<span style="color: #BB0000;">99</span>    -<span style="color: #BB0000;">99</span> NBC - … -      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         7 Adam St… Male   blue    Human Blond      185     88 DC Com… -      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         8 Agent 13 Female blue    -     Blond      173     61 Marvel… -      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>         9 Agent B… Male   brown   Human Brown      178     81 Marvel… -      </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 724 more rows, 2 more variables: alignment &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   form_status_complete &lt;fct&gt;, and abbreviated variable names ¹​eye_color,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​hair_color, ³​publisher, ⁴​skin_color</span></span></span></code></pre></div>
<p>Now look at the <code>super_hero_powers</code>, which contains data from a <strong>repeating</strong> instrument, and note the following:</p>
<ul>
<li><p>Again, this is not a sparse table, making it easy to understand its data content, and the name is descriptive.</p></li>
<li><p>Each row has the same observational unit - in this case, <strong>superpower per superhero</strong>, identified by <code>record_id</code> and <code>redcap_repeat_instance</code>. This is because <code>super_hero_powers</code> comes from a repeated instrument.</p></li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">super_hero_powers</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5,966 × 4</span></span></span>
<span><span class="co">#&gt;    record_id redcap_repeat_instance power               form_status_complete</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         0                      1 Accelerated Healing Incomplete          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         0                      2 Durability          Incomplete          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         0                      3 Longevity           Incomplete          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         0                      4 Super Strength      Incomplete          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         0                      5 Stamina             Incomplete          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         0                      6 Camouflage          Incomplete          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         0                      7 Self-Sustenance     Incomplete          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         1                      1 Agility             Incomplete          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         1                      2 Accelerated Healing Incomplete          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>         1                      3 Cold Resistance     Incomplete          </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 5,956 more rows</span></span></span></code></pre></div>
<p>In summary, here are the rules by which <code>REDCapTidieR</code> contructs tibbles:</p>
<ul>
<li><p>There is one tibble per REDCap instrument. The tibble’s name is derived from the name given to the instrument in REDCap.</p></li>
<li><p>The first column is always the record’s ID column. Note: by default, REDCap names the record id field <code>record_id</code>, but this can be changed. <code>REDCapTidieR</code> is smart enough to deal with this. For example, if the record ID field was renamed to <code>subject_id</code> then the first column of each tibble will be <code>subject_id</code>.</p></li>
<li><p>Additional identifying columns may follow the record ID column, depending on the context and repeat type of the instrument. For example, we have seen the <code>redcap_repeat_instance</code> column which appears when the tibble is derived from a repeated instrument. Tibbles derived from <a href="longitudinal_redcap.html">longitudinal projects</a> have up to two additional columns, one for event and one for arms.</p></li>
</ul>
<blockquote>
<p>Note: Taken in combination, the identifying columns of any <code>REDCapTidieR</code> tibble are guaranteed to be unique and NOT NULL, and can be used as <strong>composite primary key</strong>. This makes it easy to join tables.</p>
</blockquote>
<ul>
<li><p>After the identifying columns, data columns appear in the same order as in the REDCap instrument. Columns derived from categorical field types (<code>yesno</code>, <code>truefalse</code>, <code>dropdown</code>, <code>radiobutton</code>, <code>checkbox</code>) are populated with data representing the <strong>raw</strong> value (e.g., <code>0</code> or <code>1</code> instead of <code>FALSE</code> or <code>TRUE</code>). <strong>This behavior may change in the future</strong>.</p></li>
<li><p>The final field is always <code>form_status_complete</code>, which is an column to indicate whether the instrument was marked complete.</p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="getting-help">Getting help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h2>
<p>If you encounter a bug, please file a minimal reproducible example on <a href="https://github.com/CHOP-CGTDataOps/REDCapTidieR/issues" class="external-link">github</a>. For questions and other discussion, please feel free to reach out to the authors by email.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Richard Hanna, Stephan Kadauke.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
